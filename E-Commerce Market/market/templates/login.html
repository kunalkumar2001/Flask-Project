<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Login | Flask Market</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>

body{
height:100vh;
margin:0;
background:#05060f;
font-family:'Poppins',sans-serif;
overflow:hidden;
}

body::before{
content:'';
position:fixed;
inset:-30%;
background:
radial-gradient(circle at 20% 20%,#4facfe,transparent 40%),
radial-gradient(circle at 80% 30%,#00f2fe,transparent 40%),
radial-gradient(circle at 50% 80%,#8e2de2,transparent 40%);
filter:blur(90px);
animation:bgMove 14s infinite alternate;
}

@keyframes bgMove{
from{transform:scale(1);}
to{transform:scale(1.3) rotate(90deg);}
}

.container{
position:relative;
z-index:2;
max-width:420px;
}

.form-login{
padding:40px;
border-radius:20px;
background:rgba(255,255,255,0.12);
backdrop-filter:blur(18px);
box-shadow:0 25px 60px rgba(0,0,0,0.45);
}

.logo{
width:70px;
margin-bottom:10px;
}

label{
float:left;
color:white;
margin-top:10px;
}

.form-control{
border-radius:10px;
border:none;
background:rgba(255,255,255,0.18);
color:white;
transition: all 0.3s ease;
}

.form-control:focus{
background: white;
color: black;
transform: scale(1.02);
box-shadow: 0 0 15px rgba(79,172,254,0.8);
}

.btn-primary{
border-radius:30px;
background:linear-gradient(90deg,#00f2fe,#4facfe);
border:none;
}

.password-wrapper{
position:relative;
}

.toggle-password{
position:absolute;
right:10px;
top:50%;
transform:translateY(-50%);
cursor:pointer;
color:white;
}

.error{
color:#ff6b6b;
font-size:13px;
text-align:left;
}

.register-link{
color:#00f2fe;
margin-top:10px;
display:block;
}

.alert {
    border-radius: 10px;
    font-size: 14px;
}

</style>

</head>

<body class="text-center">

<div class="container">

<form method="POST" class="form-login">

<img src="{{ url_for('static', filename='images/logo.png') }}" class="logo">

<h4 class="text-white">Login to Flask Market</h4>

{{ form.hidden_tag() }}

{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        {% for category, message in messages %}
            
            <div class="alert alert-{{ category }} text-left">
                {{ message }}
            </div>

        {% endfor %}
    {% endif %}
{% endwith %}

<!-- USERNAME -->

{{ form.username.label() }}

{{ form.username(class="form-control", placeholder="Username") }}

{% for error in form.username.errors %}
<div class="error">{{ error }}</div>
{% endfor %}

<!-- PASSWORD -->

{{ form.password.label() }}

<div class="password-wrapper">

{{ form.password(class="form-control", id="password", placeholder="Password") }}

<span class="toggle-password" onclick="togglePassword()">üëÅ</span>

</div>

{% for error in form.password.errors %}
<div class="error">{{ error }}</div>
{% endfor %}

<br>

{{ form.submit(class="btn btn-primary btn-block") }}

<a href="{{ url_for('register_page') }}" class="register-link">
Don't have an account? Register
</a>

</form>

</div>

<script>

function togglePassword(){

const password=document.getElementById("password");

password.type=password.type==="password"?"text":"password";

}

</script>
<script>
setTimeout(()=>{
    document.querySelectorAll('.alert').forEach(el=>{
        el.style.display='none';
    });
},3000);
</script>

</body>
</html>